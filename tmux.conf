#------------------------------------------------------------------------------#
#                          cometsong rcfiles tmux.conf                         #
#------------------------------------------------------------------------------#

### escaping to the screeny equivs
unbind-key C-b
set -g prefix C-a
bind-key C-a send-prefix
bind-key A command-prompt "rename-window %%"

### copy-mode
unbind-key Space
bind-key Escape copy-mode
bind-key -t vi-copy v begin-selection
bind-key -t vi-copy y copy-selection
bind-key -t vi-copy C-v rectangle-toggle
bind-key P paste-buffer

### confirm before killing a window or server
bind-key k confirm-before kill-window
bind-key K kill-window
bind-key \ confirm-before "kill-server"

# do not clear screen on exit
setw -g alternate-screen on

### read and write and delete paste buffer
bind-key > command-prompt "save-buffer -b %1 $HOME/tmp/screen-exchange"
bind-key < command-prompt "load-buffer -b %1 $HOME/tmp/screen-exchange"
bind-key + command-prompt "delete-buffer -b %1"

### mouse settings toggle (for on-screen mouse selection)
bind-key C-m setw mouse-resize-pane \; setw mouse-select-pane \; setw mouse-select-window

### default is too slow during heavy-use of the copy buffer
set -s escape-time 100

### toggle activity/silence monitoring
bind-key m setw monitor-activity
bind-key M command-prompt -p "monitor-silence (seconds)" "setw monitor-silence %%"

### longass scrollback history limit
set-option -g history-limit 50000
set -g terminal-overrides "xterm*:smcup@:rmcup@"

### make me new
bind-key l refresh-client

### term keys, colors, prettiness
setw -g xterm-keys on
set-option -g default-terminal "screen-256color"

### vi keymodes galore!
setw -g mode-keys vi
set  -g status-keys vi

### size it how we want it
set -g aggressive-resize on
set -g force-height 0
set -g force-width 0
set -g mouse-resize-pane on

### pane splittin
bind-key | split-window -h   # default: "
bind-key - split-window      # default: %
bind-key r next-layout
bind-key x swap-pane -D

### window/pane picking
bind-key BSpace last-window
bind-key '"' choose-window
setw -g mode-mouse on
set -g mouse-resize-pane on
set -g mouse-select-pane on
set -g mouse-select-window on

### mimic vim window for panes using 'hjkl'
bind-key j select-pane -D 
bind-key k select-pane -U
bind-key h select-pane -L
bind-key l select-pane -R

### select panes with meta-arrow, w/o prefix
bind-key -n M-Down  select-pane -D
bind-key -n M-Up    select-pane -U
bind-key -n M-Left  select-pane -L
bind-key -n M-Right select-pane -R

### resize panes
bind-key C-j resize-pane -D 5
bind-key C-k resize-pane -U 5
bind-key C-h resize-pane -L 5
bind-key C-l resize-pane -R 5

### Colors
set -g status-bg black
set -g status-fg white
set -g message-bg green
set -g message-fg black
setw -g window-status-bell-attr blink
setw -g window-status-bell-bg green
setw -g window-status-bell-fg black

### default window title
setw -g allow-rename off
setw -g window-status-fg white
setw -g window-status-bg default
setw -g window-status-attr dim
setw -g window-status-format "#[fg=normal]#I:#W"

### active window title
setw -g window-status-current-format "(#I:#W)"
setw -g window-status-current-attr bright

### set xterm window status
set-option -g set-titles on
#set-option -g set-titles-string '#H  ###I.#P  #W (#S)'

### Status bar
set -g status-justify centre
#set -g status-right-length 50
set -g status-right "#[fg=magenta] @#H #[fg=cyan]%Y-%m-%d #[fg=yellow]%a #[fg=green]%H:%M #[fg=blue]#(uptime|sed -e 's/.*: //g' -e 's/,//g')#[default]"

set -g status-left-length 50  # max-length
set -g status-left '#[fg=green][#H][#[fg=yellow]#S#[fg=green]]['
set -g status-right "#[fg=green]][#[fg=yellow]#(uptime|sed -e 's/.*: //g' -e 's/,//g')#[fg=green]]"

### re-source tmux.conf in running session
bind-key C-r source-file ~/.tmux.conf

# vim:ft=tmux
